---
import { Astronav, MenuItems, MenuIcon } from 'astro-navbar';
import LogoFinal from '@assets/UI/LogoFinal.astro';
import { menuItems } from '@consts/menuItems';

interface Props {
    logoClass?: string;
    headerNavClass?: string;
    linkLogoClass?: string;
}
const { logoClass, headerNavClass, linkLogoClass, ...rest } = Astro.props;
const currentPath = Astro.url.pathname;
---

<header
    data-header
    id='navbar'
    class:list={[
        'fixed w-full px-20 flex flex-col items-center justify-between lg:flex-row top-0 z-50',
        headerNavClass,
    ]}
>
    <Astronav>
        <div class='flex w-full items-center justify-between lg:w-auto'>
            <a href='/' class:list={`px-6 ${linkLogoClass}`} {...rest}>
                <LogoFinal
                    id='logo'
                    class:list={[
                        'aspect-auto py-4 object-cover font-bold hover:stroke-12 hover:scale-110 transition-all duration-300 ease-in-out',
                        logoClass,
                    ]}
                />
            </a>

            <!-- hamburger button -->
            <div class='block lg:hidden'>
                <MenuIcon
                    id='menu-toggle'
                    class='hamburger h-8 w-8 font-bold text-[--primary-color] hover:text-black lg:text-white cursor-pointer'
                />
            </div>
        </div>
        <MenuItems
            id='mobile-menu'
            class='hidden fixed inset-0 bg-white/95 h-screen items-center justify-center lg:relative lg:inset-auto lg:bg-white lg:h-auto lg:flex lg:mt-0 lg:w-auto'
        >
            <ul
                class='flex flex-col items-center gap-8 text-[1.3rem] lg:flex-row lg:my-0'
            >
                {
                    menuItems
                        ?.filter((item) => item.active)
                        .map((item) => (
                            <li class='font-bold'>
                                <a
                                    href={item?.path}
                                    class:list={[
                                        'navbar-link flex uppercase text-gray-700 hover:text-[#EC008C] w-fit hover:scale-110 transition-all duration-300 ease-in-out',
                                        currentPath === item.path
                                            ? 'active-item'
                                            : '',
                                    ]}
                                >
                                    {item.title}
                                </a>
                            </li>
                        ))
                }
            </ul>
        </MenuItems>
    </Astronav>
</header>

<script>
    import { setupMenuToggle } from '@helpers/menuToggle';
    setupMenuToggle();
</script>

<style>
    @media (max-width: 1023px) {
        #mobile-menu:not(.hidden) {
            display: flex;
        }

        #mobile-menu.hidden {
            opacity: 0;
            pointer-events: none;
        }

        #mobile-menu:not(.hidden) {
            opacity: 1;
        }

        #mobile-menu {
            transition: opacity 0.3s ease;
        }
    }

    .hamburger {
        position: relative;
        z-index: 60;
        transition: transform 0.3s ease;
    }

    .hamburger :global(svg) {
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .hamburger :global(line) {
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        transform-origin: center;
    }

    .hamburger.open :global(line:nth-child(1)) {
        transform: rotate(45deg) translate(5px, 5px);
    }

    .hamburger.open :global(line:nth-child(2)) {
        opacity: 0;
    }

    .hamburger.open :global(line:nth-child(3)) {
        transform: rotate(-45deg) translate(7px, -6px);
    }
</style>

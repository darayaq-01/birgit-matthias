---
import { Picture } from 'astro:assets';
// import MiniGrid from '../../components/MiniGrid.astro'
import LayoutArt from '@layouts/LayoutArt.astro';
import { malereiData } from '@data/malereiData';
import Arrow from '@assets/UI/Arrow.astro';

export async function getStaticPaths() {
    return malereiData.map((photo) => ({ params: { id: photo.id } }));
}

const { id } = Astro.params;

const photo = malereiData.find((photo) => photo.id == id);
const photoIndex = malereiData.findIndex((photo) => photo.id == id);
const photoNumber = photo?.id.toString().padStart(2, '0');

// const prevPhoto = malereiData[photoIndex - 1];
// const nextPhoto = malereiData[photoIndex + 1];
---

<LayoutArt title='Gallery'>
    <section id='item-1' class='flex flex-col md:flex-row justify-evenly my-10'>
        <div class='flex flex-col md:justify-between' id='item-1'>
            <!-- titulo, numero, descripciÃ³n -->
            <div transition:name={`photo-details-${photo?.id}`} class='py-10'>
                <div>
                    <span class='text-black text-balance'>{photoNumber}</span>

                    <h2 class='text-2xl italic font-extrabold mb-4 mt-2'>
                        {photo?.title}
                    </h2>
                </div>

                <p class=''>
                    {photo?.description}
                </p>
            </div>

            <!-- arrow back to section -->
            <div class='h-16'>
                <a href='/abstrakte-malerei' class=''>
                    <Arrow class='text-gray-500 hover:text-gray-800 w-36' />
                </a>
                <!-- <MiniGrid currentPhotoId={photo?.id} /> -->
            </div>
        </div>
        <pcture>
            <!-- imagenes -->
            <nav class=''>
                <!-- to improve later -->
                <!-- <div
                        class='slide-nav__img slide-nav__img--prev'
                        style={prevPhoto
                            ? `background-image:url(${prevPhoto.imageUrl});`
                            : ''}
                    >
                    </div> -->

                <!-- image -->
                <Picture
                    class='shadow-2xl shadow-gray-800'
                    src={photo?.imageUrl ?? ''}
                    formats={['webp', 'avif']}
                    alt={photo?.title ?? ''}
                    transition:name={`photo-${photo?.id}`}
                    id={photo?.id.toString()}
                    title={photo?.title}
                />
                <!-- to improve later -->

                <!--     <div
                        class='slide-nav__img slide-nav__img--next'
                        style={nextPhoto
                            ? `background-image:url(${nextPhoto.imageUrl});`
                            : ''}
                    >
                    </div> -->
            </nav>
        </pcture>
    </section>
</LayoutArt>

---
import Layout from '@layouts/Layout.astro';
import Container from '@components/Container.astro';
import { getCollection } from 'astro:content';
import { Image } from 'astro:assets';

import FormattedDate from '@components/FormattedDate.astro';

// sort posts by date, newest first
const presse = (await getCollection('presse')).sort(
    (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
const ausstellungen = (await getCollection('ausstellungen')).sort(
    (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
---

<Layout
    title='AktivitÃ¤ten'
    backgroundColor='bg-white'
    navbarProps='bg-white/60 backdrop-blur-sm drop-shadow-md'
>
    <Container classAstro='w-[60%] flex flex-col place-items-center pt-56'>
        <article>
            <h1
                class='text-5xl font-bold lg:text-3xl w-fit pl-4 underline underline-offset-8 my-10'
            >
                Aktuelle Ausstellungen
            </h1>
            {
                ausstellungen.length === 0 ? (
                    <p>Es gibt keine aktuellen Ausstellungen.</p>
                ) : (
                    ausstellungen.map((post) => (
                        <li class='list-none p-4'>
                            <div class='mb-6 mt-2 pb-10 pt-4'>
                                <h3 class='text-3xl lg:text-2xl text-balance font-bold'>
                                    {post.data.title}
                                </h3>
                                <div class='prose-base lg:prose-2xl'>
                                    {post.data.description}
                                </div>
                            </div>
                            <Image
                                width={300}
                                src={post.data.cover}
                                alt={post.data.coverAlt}
                            />
                        </li>
                    ))
                )
            }
        </article>
        <article class='mt-10'>
            <h1
                class='text-5xl font-bold lg:text-3xl w-fit pl-4 underline underline-offset-8 my-10'
            >
                Presse
            </h1>
            {
                presse.length === 0 ? (
                    <p>Es gibt keine aktuellen posts.</p>
                ) : (
                    presse.map((post) => (
                        <li class='p-4 list-none shadow-sm hover:shadow-gray-400 hover:shadow-lg transition duration-300 ease-in-out'>
                            <a class='' href={`/aktuelles/${post.slug}/`}>
                                <div class='mb-6 mt-2 pb-10 pt-4'>
                                    <h3 class='uppercase text-balance text-2xl'>
                                        {post.data.category}
                                    </h3>
                                    <h3 class='text-3xl lg:text-2xl text-balance font-bold'>
                                        {post.data.title}
                                    </h3>
                                    <p class='pb-4 pt-2 prose-base lg:prose-xl'>
                                        <FormattedDate
                                            date={post.data.pubDate}
                                        />
                                    </p>
                                    <Image
                                        class='my-6'
                                        width={300}
                                        src={post.data.cover}
                                        alt={post.data.coverAlt}
                                    />
                                    <div class='prose-base line-clamp-4 lg:prose-2xl text-wrap'>
                                        {post.data.description}
                                    </div>
                                </div>
                            </a>
                        </li>
                    ))
                )
            }
        </article>
    </Container>
</Layout>

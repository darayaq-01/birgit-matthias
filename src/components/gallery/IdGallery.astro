---
import { Picture } from 'astro:assets';
// import MiniGrid from '../../components/MiniGrid.astro'
import LayoutArt from '@layouts/LayoutArt.astro';
import Arrow from '@assets/UI/Arrow.astro';

const { title, data, url, year } = Astro.props;

export async function getStaticPaths() {
    return data.map((el) => ({ params: { id: el.id } }));
}
export const prerender = true;

const { id } = Astro.params;
const images = data.find((image) => image.id == id);
const photoIndex = data.findIndex((images) => images.id == id);
const photoNumber = images?.id.toString().padStart(2, '0');

// const prevPhoto = malereiData[photoIndex - 1];
// const nextPhoto = malereiData[photoIndex + 1];
---

<LayoutArt title={title}>
    <section class='h-full'>
        <header>
            <h2 class='text-3xl py-8 pl-20 font-bold'>
                <span class='border-b-2 border-white pb-1'>Werke</span>
            </h2>
        </header>
        <div
            class='flex flex-col md:flex-row justify-evenly bg-white py-12 px-10'
        >
            <div class='flex w-1/3 flex-col md:justify-between items-center'>
                <!-- titulo, numero, descripciÃ³n -->
                <div
                    transition:name={`photo-details-${images?.id}`}
                    class='py-2'
                >
                    <div>
                        <h2 class='text-2xl mb-4 mt-2'>
                            <span class='italic font-extrabold'
                                >{images?.title}</span
                            >{images?.year === 0 ? null : `, ${images?.year}`}
                        </h2>
                    </div>

                    <p>
                        {images?.description}
                    </p>
                </div>

                <!-- arrow back to section -->
                <div class='h-28 self-start'>
                    <a href={url}>
                        <Arrow
                            class='w-14 mb-6 mt-6 md:w-6 m-auto hover:scale-150 transition-all duration-300 ease-in-out'
                        />
                    </a>

                    <!-- <MiniGrid currentPhotoId={photo?.id} /> -->
                </div>
            </div>
            <div class='flex-1'>
                <Picture
                    class='shadow-2xl shadow-gray-800 aspect-auto max-w-3/4 pointer-events-none'
                    src={images?.imageUrl ?? ''}
                    formats={['webp', 'avif']}
                    alt={images?.title ?? ''}
                    transition:name={`photo-${images?.id}`}
                    id={images?.id.toString()}
                    title={images?.title}
                    oncontextmenu='return false'
                />
            </div>
        </div>
    </section>
</LayoutArt>
